---
title: é˜²æŠ–
tags:
  - JS
  - é¢è¯•
  - å‰ç«¯
categories: é¢è¯•
cover: >-
  https://files.codelife.cc/wallhaven/full/j3/wallhaven-j3qq15.jpg?x-oss-process=image/resize,limit_0,m_fill,w_2560,h_1440/quality,Q_92/format,webp
abbrlink: 42006
date: 2024-08-03 16:53:21
---

# é˜²æŠ–

> é˜²æŠ–å¾ˆå¸¸è§å•Šï¼Œä½†æ˜¯ 8.2 ç±³å“ˆæ¸¸ä¸€é¢å°±æ²¡å†™å‡ºæ¥å¯ç”¨çš„ç‰ˆæœ¬ ğŸ¥²ï¼Œæ‰€ä»¥æ€»ç»“è®°å½•ä¸€ä¸‹é˜²æŠ–çš„ç›¸å…³çŸ¥è¯†

## æ˜¯ä»€ä¹ˆ

> åœ¨ä¸€å®šæ—¶é—´é—´éš”å†…ï¼Œå°†å¤šæ¬¡è§¦å‘å˜æˆä¸€æ¬¡è§¦å‘

å…¶å®å¼€å‘ä¼šé‡åˆ°å¾ˆå¤šéœ€è¦ä½¿ç”¨ä»–çš„åœºæ™¯ï¼Œæ¯”å¦‚æœ‰ä¸ªæŒ‰é’®ï¼Œç‚¹ä¸€ä¸‹å°±å‘ä¸€æ¬¡è¯·æ±‚ï¼Œå¦‚æœç”¨æˆ·ä¸€ç›´ç‚¹å‡»ï¼Œå°±ä¼šé«˜é¢‘å‘è¯·æ±‚ï¼Œè¿™ä¼šé€ æˆèµ„æºæµªè´¹ã€‚ä»¥åŠæˆ‘ä»¬æƒ³åœ¨æµè§ˆå™¨æ»šåŠ¨äº‹ä»¶æ·»åŠ ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œä¸€æ»šåŠ¨å°±å‡ºå‘äº†ç‰¹åˆ«å¤šæ¬¡ï¼Œå¸Œæœ›å¯ä»¥é™ä½ä¸€ä¸‹é¢‘ç‡ï¼Œä¸ç„¶ä¼šå½±å“æ€§èƒ½ã€‚è¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç”¨åˆ°é˜²æŠ–äº†ï¼Œå½“ç”¨æˆ·ç‚¹å‡»é¢‘ç‡è¿‡é«˜ï¼Œåªä»¥æœ€åä¸€ä¸ªä¸ºå‡†ï¼Œå°±åªå‘ä¸€æ¬¡è¯·æ±‚ã€‚

## å®ç°

å…¶å®æ€è·¯ä¹Ÿå¾ˆç®€å•ï¼Œç‚¹å‡» -> å¼€å¯ä¸€ä¸ªå®šæ—¶å™¨ï¼Œåˆ°æ—¶é—´æ‰§è¡Œå›è°ƒå‡½æ•° -> å¦‚æœè¿˜æ²¡åˆ°æ—¶é—´åˆç‚¹äº†å°±æ¸…é™¤æ—§çš„å®šæ—¶å™¨ï¼Œå¼€ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨é‡æ–°è®¡æ—¶å³å¯

è¿™æ˜¯ä¸€ä¸ªç‚¹å‡»çš„åœºæ™¯ï¼Œç‚¹å‡»é¢‘ç‡æ˜¯æ²¡æœ‰é™åˆ¶çš„

```html
<button>ç‚¹æˆ‘å•Š</button>

<script>
  const btn = document.querySelector('button')
  const fn = () => {
    console.log('ç‚¹äº†')
  }
  btn.onclick = fn
</script>
```

é‚£ä¹ˆåŸºäºæ€è·¯å®ç°ä¸€ä¸ªç®€å•çš„é˜²æŠ–ï¼Œå…¶ä¸­è¦æ³¨æ„å¤„ç† this æŒ‡å‘çš„é—®é¢˜

```js
function debounce(callback, delay) {
  let timer = null
  return function (...args) {
    clearTimeout(timer)
    timer = setTimeout(() => {
      callback.apply(this, args)
    }, delay)
  }
}
btn.onclick = debounce(fn, 500)
```

ç°åœ¨è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœç”¨æ²¡æœ‰é«˜é¢‘ç‚¹å‡»ï¼Œä»–çš„è¡Œä¸ºä¹Ÿä¼šè¢«å»¶è¿Ÿï¼Œæ¯”å¦‚ç°åœ¨ç‚¹ï¼Œ500ms åæ‰ä¼šè§¦å‘ callbackï¼Œè¿™ä¹Ÿä¼šå½±å“ä½“éªŒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªå‚æ•°æ¥æ§åˆ¶æ˜¯å¦è¦ç«‹åˆ»æ‰§è¡Œã€‚

```js
function debounce(callback, delay, immediate = false) {
  let timer = null
  return function (...args) {
    const runNow = immediate && !timer

    clearTimeout(timer)
    timer = setTimeout(() => {
      callback.apply(this, args)
      clearTimeout(timer)
    }, delay)

    if (runNow) {
      callback.apply(this, args)
      clearTimeout(timer)
    }
  }
}
btn.onclick = debounce(fn, 500, true)
```

## åœºæ™¯

å¤§å¤šç”¨äºæŒ‰é’®æäº¤ã€å®æ—¶æœç´¢ä¼˜åŒ–ã€çª—å£è°ƒæ•´äº‹ä»¶å¤„ç†
